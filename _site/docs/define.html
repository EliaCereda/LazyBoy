<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Define Model</title>
   <meta name="author" content="Garren Smith" />
   <link href="" rel="alternate" title="lazyboy" type="application/atom+xml" />

<!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="http://www.garrensmith.com/LazyBoy/css/screen.css" type="text/css" media="screen, projection" />
   <link href='http://fonts.googleapis.com/css?family=Federo' rel='stylesheet' type='text/css'>
  
   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3810980-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
   
</head>
<body>


  <div class="site">
  <div class="title">
    <a href="/">Garren Smith</a>
  </div>  
  <div id="header">
    <h1 id="header-name"><a class="extra" href="http://www.garrensmith.com/LazyBoy/">LazyBoy</a></h1>
  <ul id="header-links">
    <li><a href="/LazyBoy/docs/installation.html">Installation</a></li>
    <li><a href="/LazyBoy/docs/define.html">Define</a></li>
    <li><a href="/LazyBoy/docs/crud.html">Create, update and delete</a></li>
    <li><a href="/LazyBoy/docs/viewqueries.html">Queries</a></li>
    <li><a href="/LazyBoy/docs/embedded.html">Embedded</a></li>
    <li><a href="/LazyBoy/docs/validations.html">Validations</a></li>
  </ul>
</div>

  <h1 id='defining_a_model'>Defining a model</h1>

<p>Before being able to use a document model in your project you need to define it.</p>

<pre><code>var User =	Model.define(&#39;User&#39;, {
		name: String,
		surname: String,
		date_of_birth : DateTime,
		age: {type: Number, default: 21}
	});</code></pre>

<h2 id='property_definitions'>Property definitions</h2>

<p>Each property defined on a model must be given a type and can optionally be given a default value. The following types are supported: String Number Date</p>

<p>The <code>age</code> property above shows how to define a default value. If an object is created and no value is supplied for age the default value for will be applied. This is the same for if an object is loaded from the database and it does not have a value the default value is also applied. If no default value is given the propery will be set to <code>null</code></p>

<h2 id='model_callbacks'>Model Callbacks</h2>

<p>A couple callbacks are avaible and can be defined on a model.</p>

<pre><code>	var BlogPost = Model.define(&#39;BlogPost&#39;,{
		title: String,
		content: String,
		url: String
	});
	
	BlogPost.beforeSave(function (item) {
		item.url = item.title.split(&quot; &quot;).join(&quot;-&quot;);
	});</code></pre>

<p><code>beforeSave</code> will be called before the model is saved to the database. These callbacks are also supported: beforeSave afterSave beforeCreate</p>

<h2 id='custom_views'>Custom Views</h2>

<p>Lazyboy created set of basic views for each model. However often more complex views will be required. This can be defined as follows.</p>

<pre><code>	var Album = Model.define(&quot;Album&quot;,{
		band: String, 
		title: String, 
		rating: Number
	});

	Album.addView(&#39;BestIncubusAlbums&#39;,{ 
	  map: function (doc) {
		if (doc.model_type === &#39;Album&#39; &amp;&amp; doc.band === &#39;Incubus&#39; &amp;&amp; doc.rating === 5) {
		  emit(null,doc);
		}
	  }
	});</code></pre>

<p>To query the view:</p>

<pre><code>	Album.view(&#39;BestIncubusAlbums&#39;, function (err, albums) {
		// do something with the albums
	});</code></pre>

<h2 id='accessing_a_model'>Accessing a model</h2>

<p>A model can be access by getting it from <code>Lazyboy.Model</code></p>

<pre><code>var Model = require(&#39;lazyboy&#39;);
  var User = Model(&#39;User&#39;);
    User.find(&quot;12345&quot;, function (err, user) {
	  // do something
  });</code></pre>
  
 </div>

<a href="http://github.com/garrensmith/lazyboy"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>


</body>
</html>
